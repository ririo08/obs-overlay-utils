import{r as S,N as G,a3 as N,a4 as z,a5 as E,f as v,a6 as K,g as L,u as U,i as O,v as W,o as P,c as R,a as V,K as Q,a7 as J,n as j,d as Y,t as F,G as X,a8 as Z,a9 as A,I as ee,aa as C,ab as te,A as ae,ac as se,x as ne,ad as oe,y as re,l as b,ae as ce,af as ie,ag as ue,ah as le,ai as fe,aj as de,b as pe}from"./BCoCpzht.js";import{h as me,u as ye}from"./CntEkJQa.js";const k=async a=>{await new Promise(n=>setTimeout(n,a*1e3))};function B(a){return z()?(E(a),!0):!1}function M(a){return typeof a=="function"?a():v(a)}const I=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function he(a,n=1e3,s={}){const{immediate:r=!0,immediateCallback:e=!1}=s;let t=null;const i=S(!1);function c(){t&&(clearInterval(t),t=null)}function f(){i.value=!1,c()}function l(){const o=M(n);o<=0||(i.value=!0,e&&a(),c(),t=setInterval(a,o))}if(r&&I&&l(),G(n)||typeof n=="function"){const o=N(n,()=>{i.value&&I&&l()});B(o)}return B(f),{isActive:i,pause:f,resume:l}}const ge=K("/img/ririo.png"),_e={class:"container"},ve={key:0,src:ge,width:"48"},be=10,De=10,we=15*60,Ce=L({__name:"SendenDisplay",props:{count:{default:0},message:{default:"チャンネル登録よろしくお願いします！"}},emits:["update"],setup(a,{emit:n}){U({link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap"}]});const s=a,r=n,e=S(0),t=O(()=>s.count.toLocaleString("ja-JP")),i=O(()=>s.message.split("")),c=async()=>{r("update"),e.value=1,await k(be),e.value=0,await k(.5),e.value=2,await k(De),e.value=0};return W(()=>{c()}),he(()=>{c()},we*1e3),(f,l)=>(P(),R("div",_e,[V("h1",{id:"h101",class:j(["animate",{show:v(e)===1}])},[(P(!0),R(Q,null,J(v(i),(o,d)=>(P(),R("span",{key:d,style:Z({"animation-delay":d*.05+"s"})},F(o),5))),128))],2),V("h1",{id:"h102",class:j({show:v(e)===2})},[Y(" 現在の登録者数："+F(v(t))+"人 ",1),v(e)===2?(P(),R("img",ve)):X("",!0)],2)]))}}),Se=()=>A("color-mode").value,Pe=a=>a==="defer"||a===!1;function Re(...a){var D;const n=typeof a[a.length-1]=="string"?a.pop():void 0;typeof a[0]!="string"&&a.unshift(n);let[s,r,e={}]=a;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const t=ee(),i=r,c=()=>C.value,f=()=>t.isHydrating?t.payload.data[s]:t.static.data[s];e.server=e.server??!0,e.default=e.default??c,e.getCachedData=e.getCachedData??f,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0,e.deep=e.deep??C.deep,e.dedupe=e.dedupe??"cancel";const l=()=>e.getCachedData(s,t)!=null;if(!t._asyncData[s]||!e.immediate){(D=t.payload._errors)[s]??(D[s]=C.errorValue);const m=e.deep?S:te;t._asyncData[s]={data:m(e.getCachedData(s,t)??e.default()),pending:S(!l()),error:ae(t.payload._errors,s),status:S("idle"),_default:e.default}}const o={...t._asyncData[s]};delete o._default,o.refresh=o.execute=(m={})=>{if(t._asyncDataPromises[s]){if(Pe(m.dedupe??e.dedupe))return t._asyncDataPromises[s];t._asyncDataPromises[s].cancelled=!0}if((m._initial||t.isHydrating&&m._initial!==!1)&&l())return Promise.resolve(e.getCachedData(s,t));o.pending.value=!0,o.status.value="pending";const h=new Promise((y,u)=>{try{y(i(t))}catch(w){u(w)}}).then(async y=>{if(h.cancelled)return t._asyncDataPromises[s];let u=y;e.transform&&(u=await e.transform(y)),e.pick&&(u=Te(u,e.pick)),t.payload.data[s]=u,o.data.value=u,o.error.value=C.errorValue,o.status.value="success"}).catch(y=>{if(h.cancelled)return t._asyncDataPromises[s];o.error.value=oe(y),o.data.value=v(e.default()),o.status.value="error"}).finally(()=>{h.cancelled||(o.pending.value=!1,delete t._asyncDataPromises[s])});return t._asyncDataPromises[s]=h,t._asyncDataPromises[s]},o.clear=()=>Oe(t,s);const d=()=>o.refresh({_initial:!0}),g=e.server!==!1&&t.payload.serverRendered;{const m=re();if(m&&!m._nuxtOnBeforeMountCbs){m._nuxtOnBeforeMountCbs=[];const u=m._nuxtOnBeforeMountCbs;se(()=>{u.forEach(w=>{w()}),u.splice(0,u.length)}),ne(()=>u.splice(0,u.length))}g&&t.isHydrating&&(o.error.value||l())?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):m&&(t.payload.serverRendered&&t.isHydrating||e.lazy)&&e.immediate?m._nuxtOnBeforeMountCbs.push(d):e.immediate&&d();const h=z();if(e.watch){const u=N(e.watch,()=>o.refresh());h&&E(u)}const y=t.hook("app:data:refresh",async u=>{(!u||u.includes(s))&&await o.refresh()});h&&E(y)}const p=Promise.resolve(t._asyncDataPromises[s]).then(()=>o);return Object.assign(p,o),p}function Oe(a,n){n in a.payload.data&&(a.payload.data[n]=void 0),n in a.payload._errors&&(a.payload._errors[n]=C.errorValue),a._asyncData[n]&&(a._asyncData[n].data.value=void 0,a._asyncData[n].error.value=C.errorValue,a._asyncData[n].pending.value=!1,a._asyncData[n].status.value="idle"),n in a._asyncDataPromises&&(a._asyncDataPromises[n].cancelled=!0,a._asyncDataPromises[n]=void 0)}function Te(a,n){const s={};for(const r of n)s[r]=a[r];return s}function ke(a,n,s){const[r={},e]=[{},n],t=O(()=>b(a)),i=r.key||me([e,typeof t.value=="string"?t.value:"",...qe(r)]);if(!i||typeof i!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+i);if(!a)throw new Error("[nuxt] [useFetch] request is missing.");const c=i===e?"$f"+i:i;if(!r.baseURL&&typeof t.value=="string"&&t.value[0]==="/"&&t.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:f,lazy:l,default:o,transform:d,pick:g,watch:p,immediate:D,getCachedData:m,deep:h,dedupe:y,...u}=r,w=ce({...ie,...u,cache:typeof r.cache=="boolean"?void 0:r.cache}),H={server:f,lazy:l,default:o,transform:d,pick:g,immediate:D,getCachedData:m,deep:h,dedupe:y,watch:p===!1?[]:[w,t,...p||[]]};let _;return Re(c,()=>{var x;(x=_==null?void 0:_.abort)==null||x.call(_),_=typeof AbortController<"u"?new AbortController:{};const $=b(r.timeout);let T;return $&&(T=setTimeout(()=>_.abort(),$),_.signal.onabort=()=>clearTimeout(T)),(r.$fetch||globalThis.$fetch)(t.value,{signal:_.signal,...w}).finally(()=>{clearTimeout(T)})},H)}function qe(a){var s;const n=[((s=b(a.method))==null?void 0:s.toUpperCase())||"GET",b(a.baseURL)];for(const r of[a.params||a.query]){const e=b(r);if(!e)continue;const t={};for(const[i,c]of Object.entries(e))t[b(i)]=b(c);n.push(t)}return n}const q=new WeakMap;function Ee(a,n,s={}){const{mode:r="replace",route:e=ue(),router:t=le(),transform:i=d=>d}=s;q.has(t)||q.set(t,new Map);const c=q.get(t);let f=e.query[a];B(()=>{f=void 0});let l;const o=fe((d,g)=>(l=g,{get(){return d(),i(f!==void 0?f:M(n))},set(p){f!==p&&(f=p===n||p===null?void 0:p,c.set(a,p===n||p===null?void 0:p),g(),de(()=>{if(c.size===0)return;const D=Object.fromEntries(c.entries());c.clear();const{params:m,query:h,hash:y}=e;t[M(r)]({params:m,query:{...h,...D},hash:y})}))}}));return N(()=>e.query[a],d=>{f!==d&&(f=d,l())},{flush:"sync"}),o}const xe=L({__name:"senden",setup(a){U({link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap"}]});const n=Se();n.value="light";const{decodeBase64:s}=ye(),r=S(0),e=O(()=>{const c=Ee("value");return console.log(c.value),s(c.value)}),t=async(c,f)=>{var o,d,g;const l=await ke(`https://www.googleapis.com/youtube/v3/channels?id=${f}&key=${c}&part=statistics`,"$aRONycpEkd");if((o=l.data.value)!=null&&o.items&&(d=l.data.value.items[0].statistics)!=null&&d.subscriberCount){const p=parseInt((g=l.data.value.items[0].statistics)==null?void 0:g.subscriberCount);return isNaN(p)?0:p}return 0},i=async()=>{r.value=await t(e.value.key,e.value.channelId)};return(c,f)=>{const l=Ce;return P(),R("section",null,[pe(l,{count:v(r),onUpdate:i},null,8,["count"])])}}});export{xe as default};
