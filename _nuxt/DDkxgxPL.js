import{t as R}from"./akrGbyl6.js";import{aj as Q,ak as _,al as j,k as M,x as i,n as O}from"./BMevYSF9.js";const p=new WeakMap;function z(f,a,d={}){const{mode:l="replace",route:c=Q(),router:n=_(),transform:t}=d;let u=e=>e,y=e=>e;typeof t=="function"?u=t:t&&(t.get&&(u=t.get),t.set&&(y=t.set)),p.has(n)||p.set(n,new Map);const o=p.get(n);let r=c.query[f];R(()=>{r=void 0});let m;const h=j((e,q)=>(m=q,{get(){return e(),u(r!==void 0?r:i(a))},set(s){s=y(s),r!==s&&(r=s===i(a)?void 0:s,o.set(f,s===i(a)?void 0:s),q(),O(()=>{if(o.size===0)return;const g=Object.fromEntries(o.entries());o.clear();const{params:k,query:w,hash:x}=c;n[i(l)]({params:k,query:{...w,...g},hash:x})}))}}));return M(()=>c.query[f],e=>{r!==u(e)&&(r=e,m())},{flush:"sync"}),h}export{z as u};
