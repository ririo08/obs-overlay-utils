import{r as S,N as W,a3 as E,a4 as B,a5 as R,f as v,a6 as H,g as L,u as U,i as T,v as K,o as P,c as O,a as V,K as Q,a7 as J,n as x,d as Y,t as j,G as X,a8 as Z,a9 as A,I as ee,aa as C,ab as te,A as ae,ac as se,x as ne,ad as oe,y as re,l as b,ae as ce,af as ie,ag as ue,ah as le,ai as fe,aj as de,b as pe}from"./UKsN0O4g.js";import{h as me,u as ye}from"./CntEkJQa.js";const q=async e=>{await new Promise(n=>setTimeout(n,e*1e3))};function F(e){return B()?(R(e),!0):!1}function he(e){return typeof e=="function"?e():v(e)}const I=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function ge(e,n=1e3,s={}){const{immediate:r=!0,immediateCallback:t=!1}=s;let a=null;const i=S(!1);function c(){a&&(clearInterval(a),a=null)}function f(){i.value=!1,c()}function l(){const o=he(n);o<=0||(i.value=!0,t&&e(),c(),a=setInterval(e,o))}if(r&&I&&l(),W(n)||typeof n=="function"){const o=E(n,()=>{i.value&&I&&l()});F(o)}return F(f),{isActive:i,pause:f,resume:l}}const _e=H("/img/ririo.png"),ve={class:"container"},be={key:0,src:_e,width:"48"},De=10,we=10,Ce=15*60,Se=L({__name:"SendenDisplay",props:{count:{default:0},message:{default:"チャンネル登録よろしくお願いします！"}},emits:["update"],setup(e,{emit:n}){U({link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap"}]});const s=e,r=n,t=S(0),a=T(()=>s.count.toLocaleString("ja-JP")),i=T(()=>s.message.split("")),c=async()=>{r("update"),t.value=1,await q(De),t.value=0,await q(.5),t.value=2,await q(we),t.value=0};return K(()=>{c()}),ge(()=>{c()},Ce*1e3),(f,l)=>(P(),O("div",ve,[V("h1",{id:"h101",class:x(["animate",{show:v(t)===1}])},[(P(!0),O(Q,null,J(v(i),(o,d)=>(P(),O("span",{key:d,style:Z({"animation-delay":d*.05+"s"})},j(o),5))),128))],2),V("h1",{id:"h102",class:x({show:v(t)===2})},[Y(" 現在の登録者数："+j(v(a))+"人 ",1),v(t)===2?(P(),O("img",be)):X("",!0)],2)]))}}),Pe=()=>A("color-mode").value,Oe=e=>e==="defer"||e===!1;function Re(...e){var D;const n=typeof e[e.length-1]=="string"?e.pop():void 0;typeof e[0]!="string"&&e.unshift(n);let[s,r,t={}]=e;if(typeof s!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof r!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const a=ee(),i=r,c=()=>C.value,f=()=>a.isHydrating?a.payload.data[s]:a.static.data[s];t.server=t.server??!0,t.default=t.default??c,t.getCachedData=t.getCachedData??f,t.lazy=t.lazy??!1,t.immediate=t.immediate??!0,t.deep=t.deep??C.deep,t.dedupe=t.dedupe??"cancel";const l=()=>t.getCachedData(s,a)!=null;if(!a._asyncData[s]||!t.immediate){(D=a.payload._errors)[s]??(D[s]=C.errorValue);const m=t.deep?S:te;a._asyncData[s]={data:m(t.getCachedData(s,a)??t.default()),pending:S(!l()),error:ae(a.payload._errors,s),status:S("idle"),_default:t.default}}const o={...a._asyncData[s]};delete o._default,o.refresh=o.execute=(m={})=>{if(a._asyncDataPromises[s]){if(Oe(m.dedupe??t.dedupe))return a._asyncDataPromises[s];a._asyncDataPromises[s].cancelled=!0}if((m._initial||a.isHydrating&&m._initial!==!1)&&l())return Promise.resolve(t.getCachedData(s,a));o.pending.value=!0,o.status.value="pending";const h=new Promise((y,u)=>{try{y(i(a))}catch(w){u(w)}}).then(async y=>{if(h.cancelled)return a._asyncDataPromises[s];let u=y;t.transform&&(u=await t.transform(y)),t.pick&&(u=ke(u,t.pick)),a.payload.data[s]=u,o.data.value=u,o.error.value=C.errorValue,o.status.value="success"}).catch(y=>{if(h.cancelled)return a._asyncDataPromises[s];o.error.value=oe(y),o.data.value=v(t.default()),o.status.value="error"}).finally(()=>{h.cancelled||(o.pending.value=!1,delete a._asyncDataPromises[s])});return a._asyncDataPromises[s]=h,a._asyncDataPromises[s]},o.clear=()=>Te(a,s);const d=()=>o.refresh({_initial:!0}),g=t.server!==!1&&a.payload.serverRendered;{const m=re();if(m&&!m._nuxtOnBeforeMountCbs){m._nuxtOnBeforeMountCbs=[];const u=m._nuxtOnBeforeMountCbs;se(()=>{u.forEach(w=>{w()}),u.splice(0,u.length)}),ne(()=>u.splice(0,u.length))}g&&a.isHydrating&&(o.error.value||l())?(o.pending.value=!1,o.status.value=o.error.value?"error":"success"):m&&(a.payload.serverRendered&&a.isHydrating||t.lazy)&&t.immediate?m._nuxtOnBeforeMountCbs.push(d):t.immediate&&d();const h=B();if(t.watch){const u=E(t.watch,()=>o.refresh());h&&R(u)}const y=a.hook("app:data:refresh",async u=>{(!u||u.includes(s))&&await o.refresh()});h&&R(y)}const p=Promise.resolve(a._asyncDataPromises[s]).then(()=>o);return Object.assign(p,o),p}function Te(e,n){n in e.payload.data&&(e.payload.data[n]=void 0),n in e.payload._errors&&(e.payload._errors[n]=C.errorValue),e._asyncData[n]&&(e._asyncData[n].data.value=void 0,e._asyncData[n].error.value=C.errorValue,e._asyncData[n].pending.value=!1,e._asyncData[n].status.value="idle"),n in e._asyncDataPromises&&(e._asyncDataPromises[n].cancelled=!0,e._asyncDataPromises[n]=void 0)}function ke(e,n){const s={};for(const r of n)s[r]=e[r];return s}function qe(e,n,s){const[r={},t]=[{},n],a=T(()=>b(e)),i=r.key||me([t,typeof a.value=="string"?a.value:"",...$e(r)]);if(!i||typeof i!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+i);if(!e)throw new Error("[nuxt] [useFetch] request is missing.");const c=i===t?"$f"+i:i;if(!r.baseURL&&typeof a.value=="string"&&a.value[0]==="/"&&a.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:f,lazy:l,default:o,transform:d,pick:g,watch:p,immediate:D,getCachedData:m,deep:h,dedupe:y,...u}=r,w=ce({...ie,...u,cache:typeof r.cache=="boolean"?void 0:r.cache}),G={server:f,lazy:l,default:o,transform:d,pick:g,immediate:D,getCachedData:m,deep:h,dedupe:y,watch:p===!1?[]:[w,a,...p||[]]};let _;return Re(c,()=>{var N;(N=_==null?void 0:_.abort)==null||N.call(_),_=typeof AbortController<"u"?new AbortController:{};const M=b(r.timeout);let k;return M&&(k=setTimeout(()=>_.abort(),M),_.signal.onabort=()=>clearTimeout(k)),(r.$fetch||globalThis.$fetch)(a.value,{signal:_.signal,...w}).finally(()=>{clearTimeout(k)})},G)}function $e(e){var s;const n=[((s=b(e.method))==null?void 0:s.toUpperCase())||"GET",b(e.baseURL)];for(const r of[e.params||e.query]){const t=b(r);if(!t)continue;const a={};for(const[i,c]of Object.entries(t))a[b(i)]=b(c);n.push(a)}return n}function Ee(e){return B()?(R(e),!0):!1}function z(e){return typeof e=="function"?e():v(e)}typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const $=new WeakMap;function Be(e,n,s={}){const{mode:r="replace",route:t=ue(),router:a=le(),transform:i=d=>d}=s;$.has(a)||$.set(a,new Map);const c=$.get(a);let f=t.query[e];Ee(()=>{f=void 0});let l;const o=fe((d,g)=>(l=g,{get(){return d(),i(f!==void 0?f:z(n))},set(p){f!==p&&(f=p===n||p===null?void 0:p,c.set(e,p===n||p===null?void 0:p),g(),de(()=>{if(c.size===0)return;const D=Object.fromEntries(c.entries());c.clear();const{params:m,query:h,hash:y}=t;a[z(r)]({params:m,query:{...h,...D},hash:y})}))}}));return E(()=>t.query[e],d=>{f=d,l()},{flush:"sync"}),o}const je=L({__name:"senden",setup(e){U({link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap"}]});const n=Pe();n.value="light";const{decodeBase64:s}=ye(),r=S(0),t=T(()=>{const c=Be("value");return console.log(c.value),s(c.value)}),a=async(c,f)=>{var o,d,g;const l=await qe(`https://www.googleapis.com/youtube/v3/channels?id=${f}&key=${c}&part=statistics`,"$aRONycpEkd");if((o=l.data.value)!=null&&o.items&&(d=l.data.value.items[0].statistics)!=null&&d.subscriberCount){const p=parseInt((g=l.data.value.items[0].statistics)==null?void 0:g.subscriberCount);return isNaN(p)?0:p}return 0},i=async()=>{r.value=await a(t.value.key,t.value.channelId)};return(c,f)=>{const l=Se;return P(),O("section",null,[pe(l,{count:v(r),onUpdate:i},null,8,["count"])])}}});export{je as default};
