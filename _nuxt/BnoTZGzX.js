import{Q as W,i as v,ac as g,h as l,ae as x,ad as C,am as G,an as I,ao as _,af as D}from"./Bo6HJDbp.js";function d(s){return x()?(C(s),!0):!1}const w=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function O(s,o=1e3,p={}){const{immediate:m=!0,immediateCallback:f=!1}=p;let n=null;const e=W(!1);function i(){n&&(clearInterval(n),n=null)}function c(){e.value=!1,i()}function r(){const t=l(o);t<=0||(e.value=!0,f&&s(),i(),e.value&&(n=setInterval(s,t)))}if(m&&w&&r(),v(o)||typeof o=="function"){const t=g(o,()=>{e.value&&w&&r()});d(t)}return d(c),{isActive:e,pause:c,resume:r}}const y=new WeakMap;function T(s,o,p={}){const{mode:m="replace",route:f=G(),router:n=I(),transform:e}=p;let i=u=>u,c=u=>u;typeof e=="function"?i=e:e&&(e.get&&(i=e.get),e.set&&(c=e.set)),y.has(n)||y.set(n,new Map);const r=y.get(n);let t=f.query[s];d(()=>{t=void 0});let h;const R=_((u,q)=>(h=q,{get(){return u(),i(t!==void 0?t:l(o))},set(a){a=c(a),t!==a&&(t=a===l(o)?void 0:a,r.set(s,a===l(o)?void 0:a),q(),D(()=>{if(r.size===0)return;const S=Object.fromEntries(r.entries());r.clear();const{params:k,query:b,hash:Q}=f;n[l(m)]({params:k,query:{...b,...S},hash:Q})}))}}));return g(()=>f.query[s],u=>{t!==i(u)&&(t=u,h())},{flush:"sync"}),R}export{T as a,O as u};
