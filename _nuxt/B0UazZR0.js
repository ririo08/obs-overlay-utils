import{r as S,N as H,a3 as N,a4 as z,a5 as E,f as b,a6 as K,g as L,u as U,i as O,v as W,o as P,c as R,a as V,K as Q,a7 as J,n as j,d as Y,t as F,G as X,a8 as Z,a9 as A,I as ee,aa as C,ab as te,A as ae,ac as se,x as ne,ad as oe,y as re,l as w,ae as ie,af as ce,ag as ue,ah as le,ai as fe,aj as de,b as pe}from"./3Bznbw47.js";import{h as me,u as ye}from"./CntEkJQa.js";const k=async a=>{await new Promise(o=>setTimeout(o,a*1e3))};function B(a){return z()?(E(a),!0):!1}function M(a){return typeof a=="function"?a():b(a)}const I=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;function he(a,o=1e3,n={}){const{immediate:i=!0,immediateCallback:e=!1}=n;let t=null;const r=S(!1);function f(){t&&(clearInterval(t),t=null)}function m(){r.value=!1,f()}function l(){const s=M(o);s<=0||(r.value=!0,e&&a(),f(),r.value&&(t=setInterval(a,s)))}if(i&&I&&l(),H(o)||typeof o=="function"){const s=N(o,()=>{r.value&&I&&l()});B(s)}return B(m),{isActive:r,pause:m,resume:l}}const ge=K("/img/ririo.png"),_e={class:"container"},ve={key:0,src:ge,width:"48"},be=10,De=10,we=15*60,Ce=L({__name:"SendenDisplay",props:{count:{default:0},message:{default:"チャンネル登録よろしくお願いします！"}},emits:["update"],setup(a,{emit:o}){U({link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap"}]});const n=a,i=o,e=S(0),t=O(()=>n.count.toLocaleString("ja-JP")),r=O(()=>n.message.split("")),f=async()=>{i("update"),e.value=1,await k(be),e.value=0,await k(.5),e.value=2,await k(De),e.value=0};return W(()=>{f()}),he(()=>{f()},we*1e3),(m,l)=>(P(),R("div",_e,[V("h1",{id:"h101",class:j(["animate",{show:b(e)===1}])},[(P(!0),R(Q,null,J(b(r),(s,p)=>(P(),R("span",{key:p,style:Z({"animation-delay":p*.05+"s"})},F(s),5))),128))],2),V("h1",{id:"h102",class:j({show:b(e)===2})},[Y(" 現在の登録者数："+F(b(t))+"人 ",1),b(e)===2?(P(),R("img",ve)):X("",!0)],2)]))}}),Se=()=>A("color-mode").value,Pe=a=>a==="defer"||a===!1;function Re(...a){var D;const o=typeof a[a.length-1]=="string"?a.pop():void 0;typeof a[0]!="string"&&a.unshift(o);let[n,i,e={}]=a;if(typeof n!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const t=ee(),r=i,f=()=>C.value,m=()=>t.isHydrating?t.payload.data[n]:t.static.data[n];e.server=e.server??!0,e.default=e.default??f,e.getCachedData=e.getCachedData??m,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0,e.deep=e.deep??C.deep,e.dedupe=e.dedupe??"cancel";const l=()=>e.getCachedData(n,t)!=null;if(!t._asyncData[n]||!e.immediate){(D=t.payload._errors)[n]??(D[n]=C.errorValue);const c=e.deep?S:te;t._asyncData[n]={data:c(e.getCachedData(n,t)??e.default()),pending:S(!l()),error:ae(t.payload._errors,n),status:S("idle"),_default:e.default}}const s={...t._asyncData[n]};delete s._default,s.refresh=s.execute=(c={})=>{if(t._asyncDataPromises[n]){if(Pe(c.dedupe??e.dedupe))return t._asyncDataPromises[n];t._asyncDataPromises[n].cancelled=!0}if((c._initial||t.isHydrating&&c._initial!==!1)&&l())return Promise.resolve(e.getCachedData(n,t));s.pending.value=!0,s.status.value="pending";const h=new Promise((y,u)=>{try{y(r(t))}catch(v){u(v)}}).then(async y=>{if(h.cancelled)return t._asyncDataPromises[n];let u=y;e.transform&&(u=await e.transform(y)),e.pick&&(u=Te(u,e.pick)),t.payload.data[n]=u,s.data.value=u,s.error.value=C.errorValue,s.status.value="success"}).catch(y=>{if(h.cancelled)return t._asyncDataPromises[n];s.error.value=oe(y),s.data.value=b(e.default()),s.status.value="error"}).finally(()=>{h.cancelled||(s.pending.value=!1,delete t._asyncDataPromises[n])});return t._asyncDataPromises[n]=h,t._asyncDataPromises[n]},s.clear=()=>Oe(t,n);const p=()=>s.refresh({_initial:!0}),_=e.server!==!1&&t.payload.serverRendered;{const c=re();if(c&&!c._nuxtOnBeforeMountCbs){c._nuxtOnBeforeMountCbs=[];const u=c._nuxtOnBeforeMountCbs;se(()=>{u.forEach(v=>{v()}),u.splice(0,u.length)}),ne(()=>u.splice(0,u.length))}_&&t.isHydrating&&(s.error.value||l())?(s.pending.value=!1,s.status.value=s.error.value?"error":"success"):c&&(t.payload.serverRendered&&t.isHydrating||e.lazy)&&e.immediate?c._nuxtOnBeforeMountCbs.push(p):e.immediate&&p();const h=z();if(e.watch){const u=N(e.watch,()=>s.refresh());h&&E(u)}const y=t.hook("app:data:refresh",async u=>{(!u||u.includes(n))&&await s.refresh()});h&&E(y)}const d=Promise.resolve(t._asyncDataPromises[n]).then(()=>s);return Object.assign(d,s),d}function Oe(a,o){o in a.payload.data&&(a.payload.data[o]=void 0),o in a.payload._errors&&(a.payload._errors[o]=C.errorValue),a._asyncData[o]&&(a._asyncData[o].data.value=void 0,a._asyncData[o].error.value=C.errorValue,a._asyncData[o].pending.value=!1,a._asyncData[o].status.value="idle"),o in a._asyncDataPromises&&(a._asyncDataPromises[o].cancelled=!0,a._asyncDataPromises[o]=void 0)}function Te(a,o){const n={};for(const i of o)n[i]=a[i];return n}function ke(a,o,n){const[i={},e]=[{},o],t=O(()=>w(a)),r=i.key||me([e,typeof t.value=="string"?t.value:"",...qe(i)]);if(!r||typeof r!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+r);if(!a)throw new Error("[nuxt] [useFetch] request is missing.");const f=r===e?"$f"+r:r;if(!i.baseURL&&typeof t.value=="string"&&t.value[0]==="/"&&t.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:m,lazy:l,default:s,transform:p,pick:_,watch:d,immediate:D,getCachedData:c,deep:h,dedupe:y,...u}=i,v=ie({...ce,...u,cache:typeof i.cache=="boolean"?void 0:i.cache}),G={server:m,lazy:l,default:s,transform:p,pick:_,immediate:D,getCachedData:c,deep:h,dedupe:y,watch:d===!1?[]:[v,t,...d||[]]};let g;return Re(f,()=>{var x;(x=g==null?void 0:g.abort)==null||x.call(g),g=typeof AbortController<"u"?new AbortController:{};const $=w(i.timeout);let T;return $&&(T=setTimeout(()=>g.abort(),$),g.signal.onabort=()=>clearTimeout(T)),(i.$fetch||globalThis.$fetch)(t.value,{signal:g.signal,...v}).finally(()=>{clearTimeout(T)})},G)}function qe(a){var n;const o=[((n=w(a.method))==null?void 0:n.toUpperCase())||"GET",w(a.baseURL)];for(const i of[a.params||a.query]){const e=w(i);if(!e)continue;const t={};for(const[r,f]of Object.entries(e))t[w(r)]=w(f);o.push(t)}return o}const q=new WeakMap;function Ee(a,o,n={}){const{mode:i="replace",route:e=ue(),router:t=le(),transform:r}=n,f=r&&"get"in r?r.get:r??(d=>d),m=r&&"set"in r?r.set:d=>d;q.has(t)||q.set(t,new Map);const l=q.get(t);let s=e.query[a];B(()=>{s=void 0});let p;const _=fe((d,D)=>(p=D,{get(){return d(),f(s!==void 0?s:M(o))},set(c){c=m(c),s!==c&&(s=c===o||c===null?void 0:c,l.set(a,c===o||c===null?void 0:c),D(),de(()=>{if(l.size===0)return;const h=Object.fromEntries(l.entries());l.clear();const{params:y,query:u,hash:v}=e;t[M(i)]({params:y,query:{...u,...h},hash:v})}))}}));return N(()=>e.query[a],d=>{s!==f(d)&&(s=d,p())},{flush:"sync"}),_}const xe=L({__name:"senden",setup(a){U({link:[{rel:"preconnect",href:"https://fonts.googleapis.com"},{rel:"preconnect",href:"https://fonts.gstatic.com",crossorigin:"anonymous"},{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=RocknRoll+One&display=swap"}]});const o=Se();o.value="light";const{decodeBase64:n}=ye(),i=S(0),e=O(()=>{const f=Ee("value");return console.log(f.value),n(f.value)}),t=async(f,m)=>{var s,p,_;const l=await ke(`https://www.googleapis.com/youtube/v3/channels?id=${m}&key=${f}&part=statistics`,"$aRONycpEkd");if((s=l.data.value)!=null&&s.items&&(p=l.data.value.items[0].statistics)!=null&&p.subscriberCount){const d=parseInt((_=l.data.value.items[0].statistics)==null?void 0:_.subscriberCount);return isNaN(d)?0:d}return 0},r=async()=>{i.value=await t(e.value.key,e.value.channelId)};return(f,m)=>{const l=Ce;return P(),R("section",null,[pe(l,{count:b(i),onUpdate:r},null,8,["count"])])}}});export{xe as default};
